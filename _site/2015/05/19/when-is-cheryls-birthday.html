<!DOCTYPE html><html lang="en"><head><title>如何知道女神生日 — 8D is Here</title><link rel="prev" href="http://blog.xiaoba.me"><link rel="stylesheet" href="/css/site.css"><meta name="viewport" content="width=device-width"><meta name="author" content="Yuwei Ba"><meta name="keywords" content="Javascript, Python, Life, Thoughts"><meta name="description" content="Programming makes life easier and better. Life Lover."><link rel="icon" href="/favicon.png" type="image/png"><link rel="canonical" href="http://blog.xiaoba.me/2015/05/19/when-is-cheryls-birthday.html"><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@ibigbug"><meta property="twitter:creator" content="@ibigbug"><meta property="twitter:title" content="如何知道女神生日 — 8D is Here"><meta property="twitter:description" content=" Programming makes life easier and better. Life Lover. "><meta property="twitter:url" content="http://blog.xiaoba.me/2015/05/19/when-is-cheryls-birthday.html"><meta property="twitter:domain" content="8D is Here">
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 ga('create', 'UA-53224060-1', 'auto');
 ga('send', 'pageview');
</script>
</head><body class="yue"><div class="header"><div class="inner-header"><div class="nav">



<a class="page-link" href="/">Home</a>

<a class="page-link" href="/archives/">Archives</a>

<a class="page-link" href="/thoughts/">Thoughts</a>

<a class="page-link" href="/about/">Résumé</a>

<a class="page-link" href="/feed.xml">Feed</a>
</div></div><div class="inner-header-iphone"><div class="nav"><?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="图形" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 1000 1024" enable-background="new 15.167 -16.333 1000 1024" xml:space="preserve"><path fill="#272636" d="M872 675q28 0 47.5 -19.5t19.5 -47.5v-51q0 -28 -19.5 -47.5t-47.5 -19.5h-742q-28 0 -47.5 19.5t-19.5 47.5v51q0 28 19.5 47.5t47.5 19.5h742zM872 362q28 0 47.5 -19.5t19.5 -47.5v-51q0 -28 -19.5 -47.5t-47.5 -19.5h-742q-28 0 -47.5 19.5t-19.5 47.5v51 q0 28 19.5 47.5t47.5 19.5h742zM872 49q28 0 47.5 -19.5t19.5 -47.5v-51q0 -28 -19.5 -47.5t-47.5 -19.5h-742q-28 0 -47.5 19.5t-19.5 47.5v51q0 28 19.5 47.5t47.5 19.5h742z" transform="translate(0, 800) scale(1, -1)"/></svg><ul class="nav-list">



<li><a href="/" class="page-link">Home</a></li>

<li><a href="/archives/" class="page-link">Archives</a></li>

<li><a href="/thoughts/" class="page-link">Thoughts</a></li>

<li><a href="/about/" class="page-link">Résumé</a></li>

<li><a href="/feed.xml" class="page-link">Feed</a></li>
</ul></div></div></div><div class="main-wrapper"><div class="inner-wrapper"><div class="logo"><a href="/">8D is Here</a></div><div class="page-meta">
Interestring.
</div><div class="main-area"><div class="post-entry"><h1 class="entry-title">如何知道女神生日</h1><div class="entry-meta"><time class="updated">May 19, 2015</time></div><div class="entry-content"><ol>
  <li>两位码农 Albert 和 Bernard 刚刚跟女神 Cheryl 成为了好朋友，想知道女神的生日是多少，女神说就是下面的某一天:</li>
</ol>

<figure class="highlight"><pre><code class="language-js" data-lang="js">	<span class="nx">May</span> <span class="mi">15</span>     <span class="nx">May</span> <span class="mi">16</span>     <span class="nx">May</span> <span class="mi">19</span>
   <span class="nx">June</span> <span class="mi">17</span>    <span class="nx">June</span> <span class="mi">18</span>
   <span class="nx">July</span> <span class="mi">14</span>    <span class="nx">July</span> <span class="mi">16</span>
 <span class="nx">August</span> <span class="mi">14</span>  <span class="nx">August</span> <span class="mi">15</span>  <span class="nx">August</span> <span class="mi">17</span></code></pre></figure>

<ol>
  <li>女神又 <strong>分别</strong> 告诉了两位码农她生日的 <strong>月份</strong> 和 <strong>日期</strong></li>
  <li><strong>Albert</strong> 说: 我不知道女神的生日是多少，但是我知道 Bernard 你也肯定不知道</li>
  <li><strong>Bernard</strong> 说: 我 <strong>本来</strong> 不知道的，但是现在我知道了。</li>
  <li><strong>Albert</strong> 又说: 嘿嘿，我现在也知道了。</li>
  <li>那么女神的生日到底是多少呢?</li>
</ol>

<p>据说这是一道国考的智力题，今天我们用码农的方式来解决。</p>

<h2 id="section">1.首先，女神说了 10 个可能的日期</h2>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">DATES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'May 15'</span><span class="p">,</span> <span class="s1">'May 16'</span><span class="p">,</span> <span class="s1">'May 19'</span><span class="p">,</span>
    <span class="s1">'June 17'</span><span class="p">,</span> <span class="s1">'June 18'</span><span class="p">,</span>
    <span class="s1">'July 14'</span><span class="p">,</span> <span class="s1">'July 16'</span><span class="p">,</span>
    <span class="s1">'August 14'</span><span class="p">,</span> <span class="s1">'August 15'</span><span class="p">,</span> <span class="s1">'August 17'</span>
<span class="p">]</span></code></pre></figure>

<p>然后我们定义两个辅助函数来返回某个日期的 <strong>月份</strong> 或者 <strong>日期</strong>:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="err"> </span><span class="kd">function</span> <span class="nx">month</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">day</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">}</span></code></pre></figure>

<h2 id="section-1">2. 女神分别告诉了两个人月份和日期</h2>

<p>我们来翻译 <strong>告诉</strong> 和 <strong>知道</strong> 这两个函数:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">tell</span><span class="p">(</span><span class="nx">part</span><span class="p">,</span> <span class="nx">possible_dates</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">possible_dates</span> <span class="o">=</span> <span class="nx">possible_dates</span> <span class="o">||</span> <span class="nx">DATES</span>
  <span class="k">return</span> <span class="nx">possible_dates</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">date</span> <span class="o">=&gt;</span> <span class="nx">date</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">part</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">know</span><span class="p">(</span><span class="nx">possible_dates</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">possible_dates</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span>
<span class="p">}</span></code></pre></figure>

<p>假如女神告诉 <strong>Albert</strong> 说她生日是在 <em>五月</em>，<strong>Albert</strong> 用程序跑了一下:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">tell</span><span class="p">(</span><span class="s1">'May'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">'May 15'</span><span class="p">,</span> <span class="s1">'May 16'</span><span class="p">,</span> <span class="s1">'May 19'</span><span class="p">]</span></code></pre></figure>

<p>如果女神告诉 <strong>Bernard</strong> 说她生日是 <strong>15号</strong>， <strong>Bernard</strong> 也用程序跑了一下:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">tell</span><span class="p">(</span><span class="s1">'15'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">'May 15'</span><span class="p">,</span> <span class="s1">'August 15'</span><span class="p">]</span></code></pre></figure>

<p>对 <strong>Bernard</strong> 来说，他此时并不知道女神生日到底是多少:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">know</span><span class="p">(</span><span class="nx">tell</span><span class="p">(</span><span class="s1">'15'</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="nx">False</span></code></pre></figure>

<h2 id="section-2">整体策略</h2>

<p>当女神告诉 <strong>Albert</strong> 说是生日在 <strong>五月</strong> 的时候，<strong>Albert</strong> 就知道有结果三种可能，但是 <em>程序</em> 不是 <strong>Albert</strong>，程序只能对 <em>所有</em> 可能的日期一个一个去试。为此我们针对题目中的条件 3 - 5 编写逻辑，然后用这些逻辑去验证每个可能的日期。如果正常的话，真相只有一个。</p>

<p>下面是主函数， <code class="highlighter-rouge">cheryls_birthday</code>:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">cheryls_birthday</span><span class="p">(</span><span class="nx">possible_dates</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">possible_dates</span> <span class="o">=</span> <span class="nx">possible_dates</span> <span class="o">||</span> <span class="nx">DATES</span>
  <span class="k">return</span> <span class="nx">possible_dates</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">statements3to5</span><span class="p">)</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">statements3to5</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">statement3</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">statement4</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">statement5</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span>
<span class="p">}</span></code></pre></figure>

<h3 id="albert---bernard-">3. <strong>Albert</strong> 说: 我不知道女神的生日是多少，但是我知道 Bernard 你也肯定不知道</h3>

<p><code class="highlighter-rouge">statement3</code> 将 <strong>Albert</strong> 的陈述用代码来描述:</p>

<blockquote>
  <p><strong>Albert</strong> : 当女神告诉我她生日的月份之后，我不知道她的生日。虽然我不知道女神告诉 Bernard 的是哪一天，但是我知道所有可能的日期。不管是哪一天， Bernard 都不会知道生日是多少。</p>
</blockquote>

<p>翻译成代码:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">statement3</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">possible_dates</span> <span class="o">=</span> <span class="nx">tell</span><span class="p">(</span><span class="nx">month</span><span class="p">(</span><span class="nx">date</span><span class="p">))</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="nx">know</span><span class="p">(</span><span class="nx">possible_dates</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">possible_dates</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="nx">d</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="nx">know</span><span class="p">(</span><span class="nx">tell</span><span class="p">(</span><span class="nx">day</span><span class="p">(</span><span class="nx">d</span><span class="p">)))))</span>
<span class="p">}</span></code></pre></figure>

<p>我们可以来试一试 <em>条件3</em>:</p>

<p><code class="highlighter-rouge">statement3('May 15') -&gt; False</code></p>

<p>说明答案不是 <em>May 15</em>。</p>

<p>其实，我们可以找出所有符合 <em>条件3</em> 的答案:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">DATES</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">statement3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">'July 14'</span><span class="p">,</span> <span class="s1">'July 16'</span><span class="p">,</span> <span class="s1">'August 14'</span><span class="p">,</span> <span class="s1">'August 15'</span><span class="p">,</span> <span class="s1">'August 17'</span><span class="p">]</span></code></pre></figure>

<h3 id="bernard----">4. <strong>Bernard</strong> 说: 我 <strong>本来</strong> 不知道的，但是现在我知道了。</h3>

<p>再来翻译:
&gt; <strong>Bernard</strong>: 开始女神告诉我日期的是，我是不知道的。但是我知道了满足 <strong>Albert</strong> 说的 <code class="highlighter-rouge">statement3</code> 所有可能的日期之后，我就知道了。</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">statement4</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">at_first</span> <span class="o">=</span> <span class="nx">tell</span><span class="p">(</span><span class="nx">day</span><span class="p">(</span><span class="nx">date</span><span class="p">))</span>
  <span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="nx">know</span><span class="p">(</span><span class="nx">at_first</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">know</span><span class="p">(</span><span class="nx">at_first</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">statement3</span><span class="p">)))</span>
<span class="p">}</span></code></pre></figure>

<p><em>条件3</em> 和 <em>条件4</em> 可以得出:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">DATES</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">statement3</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="nx">statement4</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="s1">'July 16'</span><span class="p">,</span> <span class="s1">'August 15'</span><span class="p">,</span> <span class="s1">'August 17'</span><span class="p">]</span>

<span class="c1">// 离真相越来越近了</span></code></pre></figure>

<h3 id="albert--">5. <strong>Albert</strong> 又说: 嘿嘿，我现在也知道了。</h3>

<p>同样:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">statement5</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">know</span><span class="p">(</span><span class="nx">tell</span><span class="p">(</span><span class="nx">month</span><span class="p">(</span><span class="nx">date</span><span class="p">)).</span><span class="nx">filter</span><span class="p">(</span><span class="nx">statement4</span><span class="p">))</span>
<span class="p">}</span></code></pre></figure>

<h3 id="section-3">6. 答案揭晓</h3>

<p><code class="highlighter-rouge">cheryls_birthday() -&gt; ['July 16']</code></p>

<p>Yeah! 我们推理出了女神的生日是 <strong>July 16</strong>。</p>

<p>嘿嘿。</p>

<hr />
<p>抄袭自: <a href="http://nbviewer.ipython.org/url/norvig.com/ipython/Cheryl.ipynb#">When is Cheryl’s Birthday?</a></p>
</div><div class="comment-area">
   <div id="disqus_thread"></div>
   <script type="text/javascript">
       /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
       var disqus_shortname = 'heheblog'; // required: replace example with your forum shortname
       /* * * DON'T EDIT BELOW THIS LINE * * */
       (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
   </script>
   <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
   <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
   
</div></div></div></div></div><div class="footer"><div class="inner-footer"><p>&copy; Copyright 2014 by Yuwei Ba</p></div></div></body></html>
